{"version":3,"sources":["components/Sample.js","components/AudioUnit.js","components/Button.js","components/Encoder.js","components/Machine.js","serviceWorker.js","index.js","components/App.js"],"names":["Sample","p5","sample","x","y","w","h","bgOn","focused","seqLen","bgOff","bgSelectedOn","bgSelectedOff","selected","on","pattern","Array","fill","temp","render","step","i","noStroke","this","rect","start","circle","select","mouseX","mouseY","AudioUnit","type","a","d","s","r","freq","amp","osc","Oscillator","env","Envelope","playing","setADSR","setRange","play","setType","stop","Button","func","label","bgOnSync","exec","sync","String","textAlign","CENTER","text","resize","image","Encoder","val","pos","arc","PI","TWO_PI","stroke","noFill","dist","adjust","dy","reset","Machine","DIM","FPS","SAMPLES","Params","bpm","min","tic","max","muted","paused","recording","metronome","Clickables","samples","buttons","encoders","qwerty","substring","assets","url","sound","focusSample","forEach","e","sketch","preload","Object","keys","key","img","loadImage","mousePressed","mouseDragged","event","movementY","mouseWheel","delta","mouseReleased","keyPressed","keyCode","LEFT_ARROW","RIGHT_ARROW","ch","fromCharCode","toUpperCase","keyIsDown","setup","frameRate","createCanvas","window","innerWidth","innerHeight","push","bpmEncoder","oldBpm","Math","draw","background","strokeWeight","line","canvas","floor","frameCount","useEffect","className","Boolean","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.d2f55e85.chunk.js","sourcesContent":["export default function Sample(p5, {\n  sample, x, y, w, h, bgOn = [199, 185, 110], focused, seqLen,\n}) {\n  const bgOff = [149, 134, 58];\n  const bgSelectedOn = [0, 0, 0];\n  const bgSelectedOff = [255, 255, 255];\n\n  return {\n    focused,\n    sample,\n    selected: false,\n    on: false,\n    pattern: Array(seqLen).fill(false),\n    temp: false,\n    render(step, i) {\n      p5.noStroke();\n      if (step) {\n        p5.fill(...this.selected ? bgSelectedOn : bgOn);\n      } else {\n        p5.fill(...this.selected ? bgSelectedOff : bgOff);\n      }\n      p5.rect(x, y, w, h);\n      if (this.pattern[i] && !this.on) {\n        this.sample.start();\n        this.on = true;\n      }\n\n      if (this.focused) {\n        p5.fill(100);\n        p5.circle(x + w / 2, y + h + 15, 10, 10);\n      }\n    },\n    select() {\n      if (p5.mouseX >= x && p5.mouseX <= x + w && p5.mouseY >= y && p5.mouseY <= y + h) {\n        this.selected = !this.selected;\n      }\n      return this.selected;\n    },\n  };\n}\n","import p5 from 'p5';\nimport 'p5/lib/addons/p5.sound';\n\nexport default function AudioUnit({\n  type = 'sine', a = 0, d = 200, s = 50, r = 1000, freq = 250, amp = 0.5,\n}) {\n  return {\n    osc: new p5.Oscillator(),\n    env: new p5.Envelope(),\n    a: a / 1000,\n    d: d / 1000,\n    s: s / 1000,\n    r: r / 1000,\n    freq,\n    amp,\n    type,\n    playing: false,\n    start() {\n      this.playing = true;\n\n      this.env.setADSR(this.a, this.d, this.s, this.r);\n      this.env.setRange(this.amp, this.amp);\n      this.env.play();\n\n      this.osc.setType(this.type);\n      this.osc.freq(this.freq);\n      this.osc.amp(this.env);\n      this.osc.start();\n      // audio.amp(this.amp, this.a);\n      this.osc.stop(this.s);\n    },\n  };\n}\n","export default function Button(p5, func, {\n  x, y, label, selected = false, bgOn = [199, 185, 110], bgOff = [200]\n}) {\n  const bgOnSync = [255, 185, 110];\n\n  return {\n    w: 50,\n    h: 25,\n    selected,\n    exec: func,\n    render(sync) {\n      if (this.selected) {\n        p5.fill(...sync ? bgOnSync : bgOn);\n      } else {\n        p5.fill(...bgOff);\n      }\n      p5.rect(x, y, this.w, this.h);\n      p5.noStroke();\n      if (typeof label === 'string' || label instanceof String) {\n        p5.fill(255);\n        p5.textAlign(p5.CENTER);\n        p5.text(label, x + this.w / 2, y - 5);\n      } else {\n        label.resize(12, 0);\n        p5.image(label, x + this.w / 3, y - 25);\n      }\n    },\n    select() {\n      if (p5.mouseX >= x && p5.mouseX <= x + this.w && p5.mouseY >= y && p5.mouseY <= y + this.h) {\n        this.selected = !this.selected;\n        this.exec();\n      }\n    },\n  };\n}\n","export default function Encoder(p5, func, {\n  x, y, r = 50, label = '', val = 0,\n}) {\n  return {\n    r,\n    selected: false,\n    pos: {},\n    val,\n    label,\n    exec: func,\n    render() {\n      p5.arc(x, y, r, r, p5.PI, p5.PI + (p5.TWO_PI * this.val));\n\n      p5.stroke(255);\n      p5.noFill();\n      p5.circle(x, y, r);\n      p5.noStroke();\n      p5.fill(255);\n      p5.textAlign(p5.CENTER);\n      p5.text(this.label, x - 2, y + r);\n    },\n    select() {\n      const d = p5.dist(p5.mouseX, p5.mouseY, x, y);\n      if (d < r / 2) {\n        this.pos = { x: p5.mouseX, y: p5.mouseY };\n        this.selected = true;\n      }\n    },\n    adjust(dy) {\n      if (this.selected) {\n        this.exec(dy);\n      }\n    },\n    reset() {\n      this.selected = false;\n      this.pos = {};\n    },\n  };\n}\n","/* eslint-disable no-shadow */\nimport React, { useEffect } from 'react';\nimport p5 from 'p5';\n\nimport Sample from './Sample';\nimport AudioUnit from './AudioUnit';\nimport Button from './Button';\nimport Encoder from './Encoder';\n\nexport default function Machine() {\n  const DIM = { x: 1050, y: 640 };\n  const FPS = 60;\n  const SAMPLES = 16;\n\n  const Params = {\n    bpm: {\n      min: 20,\n      tic: 120,\n      max: 250,\n    },\n    step: 0,\n    muted: false,\n    paused: false,\n    recording: false,\n    metronome: false,\n    focused: 0,\n  };\n  const Clickables = {\n    samples: [],\n    buttons: [],\n    encoders: [],\n  };\n\n  const qwerty = 'qwertyuiopasdfghjklzxcvbnm'.substring(0, SAMPLES);\n\n  const assets = {\n    metronome: {\n      url: 'img/metronome.png',\n      sound: new AudioUnit({ freq: 2000, amp: 0.15 }),\n    },\n  };\n  function canvas(p5) {\n    p5.background(255);\n    p5.fill(40, 40, 50);\n    p5.noStroke();\n    p5.rect(0, 0, DIM.x, DIM.y);\n    p5.strokeWeight(1);\n    p5.stroke(255);\n    p5.line(0, DIM.y * 0.2, DIM.x, DIM.y * 0.2);\n    p5.line(0, DIM.y * 0.7, DIM.x, DIM.y * 0.7);\n  }\n\n  function focusSample(i) {\n    // Remove focus from current sample\n    Clickables.samples[Params.focused].focused = false;\n\n    // Set focus sample to passed index\n    Params.focused = i;\n    Clickables.samples[Params.focused].focused = true;\n\n    // Set current pattern to machine\n    Clickables.samples[Params.focused].pattern.forEach((e, i) => {\n      Clickables.samples[i].selected = e;\n    });\n  }\n\n  function sketch(p5) {\n    p5.preload = () => {\n      // Preload image assets\n      Object.keys(assets).forEach((key) => {\n        assets[key].img = p5.loadImage(assets[key].url);\n      });\n    };\n    p5.mousePressed = () => {\n      Object.keys(Clickables).forEach((key) => {\n        Clickables[key].forEach((e, i) => {\n          if (key === 'samples') {\n            Clickables[key][Params.focused].pattern[i] = e.select();\n          } else {\n            e.select();\n          }\n        });\n      });\n    };\n    p5.mouseDragged = (event) => {\n      Object.keys(Clickables).forEach((key) => {\n        if (key === 'encoders') {\n          Clickables[key].forEach((e) => {\n            e.adjust(-event.movementY);\n          });\n        }\n      });\n    };\n    p5.mouseWheel = (event) => {\n      Object.keys(Clickables).forEach((key) => {\n        if (key === 'encoders') {\n          Clickables[key].forEach((e) => {\n            e.select();\n            e.adjust(event.delta);\n            e.reset();\n          });\n        }\n      });\n    };\n    p5.mouseReleased = () => {\n      Object.keys(Clickables).forEach((key) => {\n        if (key === 'encoders') {\n          Clickables[key].forEach((e) => {\n            e.reset();\n          });\n        }\n      });\n    };\n    p5.keyPressed = () => {\n      if (p5.keyCode === p5.LEFT_ARROW) {\n        focusSample(Params.focused > 0 ? Params.focused - 1 : SAMPLES - 1);\n      } else if (p5.keyCode === p5.RIGHT_ARROW) {\n        focusSample(Params.focused < SAMPLES - 1 ? Params.focused + 1 : 0);\n      } else {\n        [...qwerty].forEach((ch, i) => {\n          if (String.fromCharCode(p5.keyCode) === ch.toUpperCase()) {\n            // Shortcut to select sample with SHIFT +\n            if (p5.keyIsDown(16)) {\n              focusSample(i);\n            } else {\n              Clickables.samples[i].sample.start();\n              Clickables.samples[i].sample.playing = false;\n              if (Params.recording) {\n                Clickables.samples[i].pattern[Params.step] = true;\n                if (i === Params.focused) {\n                  focusSample(i);\n                }\n              }\n            }\n          }\n        });\n      }\n    };\n    p5.setup = () => {\n      p5.frameRate(FPS);\n      p5.createCanvas(window.innerWidth, window.innerHeight);\n\n      // Create samples\n      for (let i = 0; i < SAMPLES; i++) {\n        Clickables.samples.push(\n          new Sample(p5, {\n            sample: new AudioUnit({ freq: (i + 1) * 100 }),\n            seqLen: SAMPLES,\n            x: i * (DIM.x / SAMPLES) + DIM.x / SAMPLES / 4,\n            y: DIM.y - DIM.y * 0.25,\n            w: DIM.x / SAMPLES / 2,\n            h: DIM.y * 0.2,\n            focused: i === Params.focused,\n          }),\n        );\n      }\n      // Metronome\n      Clickables.buttons.push(\n        new Button(p5, () => {\n          Params.metronome = !Params.metronome;\n        }, {\n          x: DIM.x / 2,\n          y: DIM.y - DIM.y * 0.35,\n          label: assets.metronome.img,\n        }),\n      );\n      // Play / pause\n      Clickables.buttons.push(\n        new Button(p5, () => { Params.paused = !Params.paused; }, {\n          x: DIM.x / 2 + Clickables.buttons[0].w + 10,\n          y: DIM.y - DIM.y * 0.35,\n          label: '▶',\n          selected: true,\n        }),\n      );\n      Clickables.buttons.push(\n        new Button(p5, () => { Params.recording = !Params.recording; }, {\n          x: DIM.x / 2 + (Clickables.buttons[0].w + 10) * 2,\n          y: DIM.y - DIM.y * .35,\n          label: '●',\n          bgOff: [255, 130, 130],\n          bgOn: [255, 60, 0],\n        })\n      );\n      // Clickables.buttons.push(\n      //   new Button(p5, () => { })\n      // BPM\n      const bpmEncoder = new Encoder(p5, null, {\n        label: Params.bpm.tic,\n        val: Params.bpm.tic / Params.bpm.max,\n        x: DIM.x - 50,\n        y: 50,\n      });\n      bpmEncoder.exec = (d) => {\n        const oldBpm = Params.bpm.tic;\n        Params.bpm.tic = Math.max(\n          Math.min(Params.bpm.max, Params.bpm.tic + d),\n          Params.bpm.min,\n        );\n        bpmEncoder.val += (Params.bpm.tic - oldBpm) / Params.bpm.max;\n        bpmEncoder.label = Params.bpm.tic;\n      };\n      Clickables.encoders.push(bpmEncoder);\n    };\n    p5.draw = () => {\n      canvas(p5);\n\n      if (!Params.paused\n        && Math.floor(p5.frameCount % (FPS / (1 / 60) / Params.bpm.tic / 4)) === 0) {\n        Clickables.samples.forEach((e) => {\n          e.on = false;\n        });\n        Params.step = (Params.step + 1) % SAMPLES;\n        if (Params.step % 4 === 0 && Params.metronome) {\n          assets.metronome.sound.start();\n        }\n      }\n\n      Clickables.samples.forEach((e, i) => {\n        e.render(i === Params.step, Params.step);\n      });\n\n      // Make first button light up to the metronome (play / pause)\n      Clickables.buttons.forEach((e, i) => {\n        e.render(i === 0 && Params.step % 4 === 0);\n      });\n\n      Clickables.encoders.forEach((e) => {\n        e.render();\n      });\n    };\n  }\n\n  useEffect(() => {\n    // eslint-disable-next-line new-cap, no-new\n    new p5(sketch);\n  });\n\n  return (\n    <div className=\"Machine\">\n      <noscript>Please enable JavaScript to use this application</noscript>\n    </div>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react';\nimport Machine from './Machine';\nimport './App.scss';\n\nexport default function App() {\n  // function canvas(p5) {\n  //   p5.background(255);\n  //   p5.fill(40, 40, 50);\n  //   p5.rect(0, 0, D[0], D[1]);\n  //   p5.stroke(255);\n  //   p5.line(0, D[1] * .2, D[0], D[1] * .2);\n  //   p5.line(0, D[1] * .7, D[0], D[1] * .7);\n\n  //   if (!paused && Math.floor(p5.frameCount % (FPS * 60 / BPM / (SAMPLES))) === 0) {\n  //     step = (step + 1) % SAMPLES;\n  //   }\n  //   contexts.forEach((e, i) => sample(i === step, bass, e));\n  // }\n\n\n  return (\n    <div className=\"App\">\n      <Machine />\n    </div>\n  );\n}"],"sourceRoot":""}