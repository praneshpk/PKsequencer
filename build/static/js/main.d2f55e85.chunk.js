(this.webpackJsonppksequencer=this.webpackJsonppksequencer||[]).push([[0],{10:function(e,t,s){},13:function(e,t,s){},14:function(e,t,s){"use strict";s.r(t);var n=s(0),o=s.n(n),i=s(4),c=s.n(i),a=(s(10),s(1)),r=s(2),l=s.n(r);function u(e,t){var s=t.sample,n=t.x,o=t.y,i=t.w,c=t.h,r=t.bgOn,l=void 0===r?[199,185,110]:r,u=t.focused,f=t.seqLen,d=[149,134,58],m=[0,0,0],p=[255,255,255];return{focused:u,sample:s,selected:!1,on:!1,pattern:Array(f).fill(!1),temp:!1,render:function(t,s){e.noStroke(),t?e.fill.apply(e,Object(a.a)(this.selected?m:l)):e.fill.apply(e,Object(a.a)(this.selected?p:d)),e.rect(n,o,i,c),this.pattern[s]&&!this.on&&(this.sample.start(),this.on=!0),this.focused&&(e.fill(100),e.circle(n+i/2,o+c+15,10,10))},select:function(){return e.mouseX>=n&&e.mouseX<=n+i&&e.mouseY>=o&&e.mouseY<=o+c&&(this.selected=!this.selected),this.selected}}}s(12);function f(e){var t=e.type,s=void 0===t?"sine":t,n=e.a,o=void 0===n?0:n,i=e.d,c=void 0===i?200:i,a=e.s,r=void 0===a?50:a,u=e.r,f=void 0===u?1e3:u,d=e.freq,m=void 0===d?250:d,p=e.amp,h=void 0===p?.5:p;return{osc:new l.a.Oscillator,env:new l.a.Envelope,a:o/1e3,d:c/1e3,s:r/1e3,r:f/1e3,freq:m,amp:h,type:s,playing:!1,start:function(){this.playing=!0,this.env.setADSR(this.a,this.d,this.s,this.r),this.env.setRange(this.amp,this.amp),this.env.play(),this.osc.setType(this.type),this.osc.freq(this.freq),this.osc.amp(this.env),this.osc.start(),this.osc.stop(this.s)}}}function d(e,t,s){var n=s.x,o=s.y,i=s.label,c=s.selected,r=void 0!==c&&c,l=s.bgOn,u=void 0===l?[199,185,110]:l,f=s.bgOff,d=void 0===f?[200]:f,m=[255,185,110];return{w:50,h:25,selected:r,exec:t,render:function(t){this.selected?e.fill.apply(e,Object(a.a)(t?m:u)):e.fill.apply(e,Object(a.a)(d)),e.rect(n,o,this.w,this.h),e.noStroke(),"string"===typeof i||i instanceof String?(e.fill(255),e.textAlign(e.CENTER),e.text(i,n+this.w/2,o-5)):(i.resize(12,0),e.image(i,n+this.w/3,o-25))},select:function(){e.mouseX>=n&&e.mouseX<=n+this.w&&e.mouseY>=o&&e.mouseY<=o+this.h&&(this.selected=!this.selected,this.exec())}}}function m(e,t,s){var n=s.x,o=s.y,i=s.r,c=void 0===i?50:i,a=s.label,r=void 0===a?"":a,l=s.val;return{r:c,selected:!1,pos:{},val:void 0===l?0:l,label:r,exec:t,render:function(){e.arc(n,o,c,c,e.PI,e.PI+e.TWO_PI*this.val),e.stroke(255),e.noFill(),e.circle(n,o,c),e.noStroke(),e.fill(255),e.textAlign(e.CENTER),e.text(this.label,n-2,o+c)},select:function(){e.dist(e.mouseX,e.mouseY,n,o)<c/2&&(this.pos={x:e.mouseX,y:e.mouseY},this.selected=!0)},adjust:function(e){this.selected&&this.exec(e)},reset:function(){this.selected=!1,this.pos={}}}}function p(){var e={x:1050,y:640},t=60,s=16,i={bpm:{min:20,tic:120,max:250},step:0,muted:!1,paused:!1,recording:!1,metronome:!1,focused:0},c={samples:[],buttons:[],encoders:[]},r="qwertyuiopasdfghjklzxcvbnm".substring(0,s),p={metronome:{url:"img/metronome.png",sound:new f({freq:2e3,amp:.15})}};function h(e){c.samples[i.focused].focused=!1,i.focused=e,c.samples[i.focused].focused=!0,c.samples[i.focused].pattern.forEach((function(e,t){c.samples[t].selected=e}))}function b(n){n.preload=function(){Object.keys(p).forEach((function(e){p[e].img=n.loadImage(p[e].url)}))},n.mousePressed=function(){Object.keys(c).forEach((function(e){c[e].forEach((function(t,s){"samples"===e?c[e][i.focused].pattern[s]=t.select():t.select()}))}))},n.mouseDragged=function(e){Object.keys(c).forEach((function(t){"encoders"===t&&c[t].forEach((function(t){t.adjust(-e.movementY)}))}))},n.mouseWheel=function(e){Object.keys(c).forEach((function(t){"encoders"===t&&c[t].forEach((function(t){t.select(),t.adjust(e.delta),t.reset()}))}))},n.mouseReleased=function(){Object.keys(c).forEach((function(e){"encoders"===e&&c[e].forEach((function(e){e.reset()}))}))},n.keyPressed=function(){n.keyCode===n.LEFT_ARROW?h(i.focused>0?i.focused-1:s-1):n.keyCode===n.RIGHT_ARROW?h(i.focused<s-1?i.focused+1:0):Object(a.a)(r).forEach((function(e,t){String.fromCharCode(n.keyCode)===e.toUpperCase()&&(n.keyIsDown(16)?h(t):(c.samples[t].sample.start(),c.samples[t].sample.playing=!1,i.recording&&(c.samples[t].pattern[i.step]=!0,t===i.focused&&h(t))))}))},n.setup=function(){n.frameRate(t),n.createCanvas(window.innerWidth,window.innerHeight);for(var o=0;o<s;o++)c.samples.push(new u(n,{sample:new f({freq:100*(o+1)}),seqLen:s,x:o*(e.x/s)+e.x/s/4,y:e.y-.25*e.y,w:e.x/s/2,h:.2*e.y,focused:o===i.focused}));c.buttons.push(new d(n,(function(){i.metronome=!i.metronome}),{x:e.x/2,y:e.y-.35*e.y,label:p.metronome.img})),c.buttons.push(new d(n,(function(){i.paused=!i.paused}),{x:e.x/2+c.buttons[0].w+10,y:e.y-.35*e.y,label:"\u25b6",selected:!0})),c.buttons.push(new d(n,(function(){i.recording=!i.recording}),{x:e.x/2+2*(c.buttons[0].w+10),y:e.y-.35*e.y,label:"\u25cf",bgOff:[255,130,130],bgOn:[255,60,0]}));var a=new m(n,null,{label:i.bpm.tic,val:i.bpm.tic/i.bpm.max,x:e.x-50,y:50});a.exec=function(e){var t=i.bpm.tic;i.bpm.tic=Math.max(Math.min(i.bpm.max,i.bpm.tic+e),i.bpm.min),a.val+=(i.bpm.tic-t)/i.bpm.max,a.label=i.bpm.tic},c.encoders.push(a)},n.draw=function(){!function(t){t.background(255),t.fill(40,40,50),t.noStroke(),t.rect(0,0,e.x,e.y),t.strokeWeight(1),t.stroke(255),t.line(0,.2*e.y,e.x,.2*e.y),t.line(0,.7*e.y,e.x,.7*e.y)}(n),i.paused||0!==Math.floor(n.frameCount%(t/(1/60)/i.bpm.tic/4))||(c.samples.forEach((function(e){e.on=!1})),i.step=(i.step+1)%s,i.step%4===0&&i.metronome&&p.metronome.sound.start()),c.samples.forEach((function(e,t){e.render(t===i.step,i.step)})),c.buttons.forEach((function(e,t){e.render(0===t&&i.step%4===0)})),c.encoders.forEach((function(e){e.render()}))}}return Object(n.useEffect)((function(){new l.a(b)})),o.a.createElement("div",{className:"Machine"},o.a.createElement("noscript",null,"Please enable JavaScript to use this application"))}s(13);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement((function(){return o.a.createElement("div",{className:"App"},o.a.createElement(p,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},5:function(e,t,s){e.exports=s(14)}},[[5,1,2]]]);
//# sourceMappingURL=main.d2f55e85.chunk.js.map